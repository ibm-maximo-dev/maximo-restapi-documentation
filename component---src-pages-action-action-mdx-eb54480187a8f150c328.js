"use strict";(self.webpackChunkmas_playbook=self.webpackChunkmas_playbook||[]).push([[2280],{3624:function(e,t,a){a.d(t,{Z:function(){return N}});var n=a(7294),o=a(8650),i=a.n(o),r=a(1597),s=a(811),l=a(87),A=a(5900),c=a.n(A),p=function(e){var t,a=e.title,o=e.theme,i=e.tabs,r=void 0===i?[]:i;return n.createElement("div",{className:c()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=r.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===o,t))},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12"},n.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},a)))))},m=function(e){var t=e.relativePagePath,a=e.repository,o=(0,r.useStaticQuery)("1364590287").site.siteMetadata.repository,i=a||o,s=i.baseUrl,l=i.subDirectory,A=s+"/edit/"+i.branch+l+"/src/pages"+t;return s?n.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},n.createElement("div",{className:"bx--col"},n.createElement("a",{className:"EditLink-module--link--IDrl1",href:A},"Edit this page on GitHub"))):null},d=a(4703),h=a(1721),u=function(e){function t(){return e.apply(this,arguments)||this}return(0,h.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,o=e.slug,s=o.split("/").filter(Boolean).slice(-1)[0],l=a.map((function(e){var t,a=i()(e,{lower:!0,strict:!0}),l=a===s,A=new RegExp(s+"/?(#.*)?$"),p=o.replace(A,a);return n.createElement("li",{key:e,className:c()((t={},t["PageTabs-module--selected-item--aBB0K"]=l,t),"PageTabs-module--list-item--024o6")},n.createElement(r.Link,{className:"PageTabs-module--link--Kz-7R",to:""+p},e))}));return n.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},n.createElement("nav",{"aria-label":t},n.createElement("ul",{className:"PageTabs-module--list--xLqxG"},l))))))},t}(n.Component),g=u,k=a(7296),f=a(5387),w=a(3732),b=function(e){var t=e.date,a=new Date(t);return t?n.createElement(w.X2,{className:"last-modified-date-module--row--XJoYQ"},n.createElement(w.sg,null,n.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},N=function(e){var t=e.pageContext,a=e.children,o=e.location,A=e.Title,c=t.frontmatter,h=void 0===c?{}:c,u=t.relativePagePath,w=t.titleType,N=h.tabs,E=h.title,v=h.theme,y=h.description,x=h.keywords,C=h.date,T=(0,f.Z)().interiorTheme,P=(0,r.useStaticQuery)("2456312558").site.pathPrefix,S=P?o.pathname.replace(P,""):o.pathname,j=N?S.split("/").filter(Boolean).slice(-1)[0]||i()(N[0],{lower:!0}):"",B=v||T;return n.createElement(l.Z,{tabs:N,homepage:!1,theme:B,pageTitle:E,pageDescription:y,pageKeywords:x,titleType:w},n.createElement(p,{title:A?n.createElement(A,null):E,label:"label",tabs:N,theme:B}),N&&n.createElement(g,{title:E,slug:S,tabs:N,currentTab:j}),n.createElement(k.Z,{padded:!0},a,n.createElement(m,{relativePagePath:u}),n.createElement(b,{date:C})),n.createElement(d.Z,{pageContext:t,location:o,slug:S,tabs:N,currentTab:j}),n.createElement(s.Z,null))}},4731:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return s},default:function(){return c}});var n=a(3366),o=(a(7294),a(4983)),i=a(3624),r=["components"],s={},l={_frontmatter:s},A=i.Z;function c(e){var t=e.components,a=(0,n.Z)(e,r);return(0,o.kt)(A,Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The functionality of ",(0,o.kt)("inlineCode",{parentName:"p"},"Standard Services")," is available to get information about application services. Maximo Asset Management has multiple application services - aka Appservices, which provides service methods that act on MBOs to perform a business task. While most of these calls end up modifying the state of the system, some of these calls are just to get information. You can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"JSR 181"),"  annotations to expose these methods as ",(0,o.kt)("inlineCode",{parentName:"p"},"WebMethods"),", which can be accessed using SOAP and REST calls. For the purpose of this discussion, we are only going to focus on the RESTFul aspects of these methods."),(0,o.kt)("p",null,"Simply put, you can add a ",(0,o.kt)("inlineCode",{parentName:"p"},"WebMethod")," to any existing Maximo application service by extending the service class and adding a method. This example is from extending the ",(0,o.kt)("inlineCode",{parentName:"p"},"Workorder")," Service (",(0,o.kt)("inlineCode",{parentName:"p"},"psdi.app.workorder.WOService"),"):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'@WebMethod\npublic void approve(@WSMboKey(value="WORKORDER") MboRemote wo, String memo)\n{\n  wo.changeStatus("APPR",MXServer.getMXServer().getDate(),memo);\n}\n')),(0,o.kt)("p",null,"Next you want to make sure that your method is available for REST API calls. You can select any work order record and use the rest API to get the set of allowed actions on that resource as shown in the following query:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'GET /oslc/os/mxapiwo?oslc.where=wonum="1001"&oslc.select=allowedactions\n')),(0,o.kt)("p",null,"You will see the list of allowed actions, which are WebMethods for the service corresponding to the root object of the object structure along with the list of actions registered with the object structure (using the application menu “Action Definition”). The resulting JSON provides the JSON schema for web method as well as the HTTP method and the name of the action, which can be used to invoke the action. The following sample call demonstrates how these methods are invoked:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"POST <uri of the workorder 1001>?action=wsmethod:approve \nx-method-override: PATCH\n")),(0,o.kt)("p",null,"Post body:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "memo":"Testing"\n}\n')),(0,o.kt)("p",null,"Note you need to set the request header ",(0,o.kt)("inlineCode",{parentName:"p"},"x-method-override")," as ",(0,o.kt)("inlineCode",{parentName:"p"},"PATCH")," for invoking this action API, as this is operating on an existing MBO (the first parameter to the method). This MBO reference is derived from the request URI (the URI of the work order 1001) and passed into the method as part of the API invocation. The JSON schema for the payload reflects the parameter data types (in the method) and the parameter names."),(0,o.kt)("p",null,"The query parameter ",(0,o.kt)("inlineCode",{parentName:"p"},"action=wsmethod:approve")," is the fully qualified name of the action. The format is ",(0,o.kt)("inlineCode",{parentName:"p"},"<action type>:<name>")," where ",(0,o.kt)("inlineCode",{parentName:"p"},"name")," is the java method name for the action type ",(0,o.kt)("inlineCode",{parentName:"p"},"wsmethod")," ."),(0,o.kt)("p",null,"In additon to this, we also support the concept of streaming action apis where one can directly access the REST request input stream. In this model you can define a java method with one and only one method parameter of type ",(0,o.kt)("inlineCode",{parentName:"p"},"com.ibm.tivoli.maximo.oslc.provider.OslcRequest"),". An example is shown below"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'@WebMethod\npublic void loadFile(OslcRequest request)\n{\n    //you can now use the request to get the query params as well as the inputstream like \n    String params1 = request.getQueryParam("param1");\n    InputStream is = request.getInputStream();\n    //use the input stream to read the blob which is in the body of the request\n    ....\n}\n')),(0,o.kt)("p",null,"However there are limitations with overloaded methods, where overloaded methods are not supported for REST API calls."),(0,o.kt)("p",null,"There are methods available in the out of the box service and you can use ",(0,o.kt)("inlineCode",{parentName:"p"},"allowedactions")," to see these methods."),(0,o.kt)("p",null,"In addition to ",(0,o.kt)("inlineCode",{parentName:"p"},"webmethod")," based actions, the REST APIs also support scripted actions. You can write a REST action code by using automation scripts. A simple example below will explain this concept."),(0,o.kt)("p",null,"Firstly, you create an automation script in the Automation script application by using the ",(0,o.kt)("strong",{parentName:"p"},"Create > Script For Integration")," option. You select the object structure, then select the type of script as ",(0,o.kt)("inlineCode",{parentName:"p"},"Action Processing"),", and give a name for the action. You can write a script (in any language - ",(0,o.kt)("inlineCode",{parentName:"p"},"python"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"js"),") by using the implicit variable ",(0,o.kt)("inlineCode",{parentName:"p"},"mbo"),". For example, the following script changes the status of Asset to ",(0,o.kt)("inlineCode",{parentName:"p"},"OPERATING"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'mbo.changeStatus("OPERATING",False,False,False,False)\n')),(0,o.kt)("p",null,"Save the script.\nNote that you did not write any code to commit the modification to the Asset MBO. The REST API framework commits the transaction after the method completes."),(0,o.kt)("p",null,"Next you register that script with the object structure in the Object Structure application. Select the ",(0,o.kt)("strong",{parentName:"p"},"Action Definition")," action and set the script as an action to the object structure. Name the action same as the name of the script and click ",(0,o.kt)("strong",{parentName:"p"},"OK")," to save the configuration."),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"623px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"54.166666666666664%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd9kqQHD/8QAGhABAAEFAAAAAAAAAAAAAAAAAQACEBEhMf/aAAgBAQABBQINtAGIdW3/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAQZEg/9oACAEBAAY/AnR0dx//xAAcEAEAAgEFAAAAAAAAAAAAAAABABEQITFRYZH/2gAIAQEAAT8hNAurtLjftK8w2oyUuP/aAAwDAQACAAMAAAAQww//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAeEAABBAEFAAAAAAAAAAAAAAABABEhMdEQQXGR8P/aAAgBAQABPxBhz8LR4ICGk5kNruZUSCwyr440/9k=')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Action",title:"Action",src:"/maximo-restapi-documentation/static/c889498580f02d5b33c7db8871573ecc/6d9cc/action1.jpg",srcSet:["/maximo-restapi-documentation/static/c889498580f02d5b33c7db8871573ecc/69549/action1.jpg 288w","/maximo-restapi-documentation/static/c889498580f02d5b33c7db8871573ecc/473e3/action1.jpg 576w","/maximo-restapi-documentation/static/c889498580f02d5b33c7db8871573ecc/6d9cc/action1.jpg 623w"],sizes:"(max-width: 623px) 100vw, 623px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:""})),(0,o.kt)("p",null,"Next you can invoke this script similar to the following request:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"POST <uri of the asset 1001>?action=TEST \nx-method-override: PATCH\n")),(0,o.kt)("p",null,"The asset status changes to ",(0,o.kt)("inlineCode",{parentName:"p"},"OPERATING"),". Note that if you want to get the changed Asset in response, you can add the request header ",(0,o.kt)("inlineCode",{parentName:"p"},"properties"),"  with your desired value.\nYou can also use this actions rest APIs to invoke ",(0,o.kt)("inlineCode",{parentName:"p"},"workflows"),". The following example shows how the ",(0,o.kt)("inlineCode",{parentName:"p"},"ABC")," workflow for the asset is invoked:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"POST <uri of the asset 1001>?action=workflow:ABC \nx-method-override: PATCH\n")),(0,o.kt)("p",null,"For non-interactive workflows, this is all you need to do to initiate it. Interactive workflows require user interaction by the placement of assignments, input, and interaction nodes. Interactive workflows will be covered in the “Interfacing with the Workflow Engine” section."))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-action-action-mdx-eb54480187a8f150c328.js.map