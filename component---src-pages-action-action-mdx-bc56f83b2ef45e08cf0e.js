"use strict";(self.webpackChunkmas_playbook=self.webpackChunkmas_playbook||[]).push([[2280],{3624:function(e,t,a){a.d(t,{Z:function(){return E}});var o=a(7294),n=a(8650),i=a.n(n),s=a(1597),r=a(811),l=a(87),A=a(5900),c=a.n(A),d=function(e){var t,a=e.title,n=e.theme,i=e.tabs,s=void 0===i?[]:i;return o.createElement("div",{className:c()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=s.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===n,t))},o.createElement("div",{className:"bx--grid"},o.createElement("div",{className:"bx--row"},o.createElement("div",{className:"bx--col-lg-12"},o.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},a)))))},m=function(e){var t=e.relativePagePath,a=e.repository,n=(0,s.useStaticQuery)("1364590287").site.siteMetadata.repository,i=a||n,r=i.baseUrl,l=i.subDirectory,A=r+"/edit/"+i.branch+l+"/src/pages"+t;return r?o.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},o.createElement("div",{className:"bx--col"},o.createElement("a",{className:"EditLink-module--link--IDrl1",href:A},"Edit this page on GitHub"))):null},h=a(4703),p=a(1721),u=function(e){function t(){return e.apply(this,arguments)||this}return(0,p.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,n=e.slug,r=n.split("/").filter(Boolean).slice(-1)[0],l=a.map((function(e){var t,a=i()(e,{lower:!0,strict:!0}),l=a===r,A=new RegExp(r+"/?(#.*)?$"),d=n.replace(A,a);return o.createElement("li",{key:e,className:c()((t={},t["PageTabs-module--selected-item--aBB0K"]=l,t),"PageTabs-module--list-item--024o6")},o.createElement(s.Link,{className:"PageTabs-module--link--Kz-7R",to:""+d},e))}));return o.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},o.createElement("div",{className:"bx--grid"},o.createElement("div",{className:"bx--row"},o.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},o.createElement("nav",{"aria-label":t},o.createElement("ul",{className:"PageTabs-module--list--xLqxG"},l))))))},t}(o.Component),g=u,w=a(7296),f=a(5387),b=a(3732),k=function(e){var t=e.date,a=new Date(t);return t?o.createElement(b.X2,{className:"last-modified-date-module--row--XJoYQ"},o.createElement(b.sg,null,o.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},E=function(e){var t=e.pageContext,a=e.children,n=e.location,A=e.Title,c=t.frontmatter,p=void 0===c?{}:c,u=t.relativePagePath,b=t.titleType,E=p.tabs,v=p.title,y=p.theme,N=p.description,x=p.keywords,T=p.date,j=(0,f.Z)().interiorTheme,P=(0,s.useStaticQuery)("2456312558").site.pathPrefix,S=P?n.pathname.replace(P,""):n.pathname,Q=E?S.split("/").filter(Boolean).slice(-1)[0]||i()(E[0],{lower:!0}):"",B=y||j;return o.createElement(l.Z,{tabs:E,homepage:!1,theme:B,pageTitle:v,pageDescription:N,pageKeywords:x,titleType:b},o.createElement(d,{title:A?o.createElement(A,null):v,label:"label",tabs:E,theme:B}),E&&o.createElement(g,{title:v,slug:S,tabs:E,currentTab:Q}),o.createElement(w.Z,{padded:!0},a,o.createElement(m,{relativePagePath:u}),o.createElement(k,{date:T})),o.createElement(h.Z,{pageContext:t,location:n,slug:S,tabs:E,currentTab:Q}),o.createElement(r.Z,null))}},4731:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return r},default:function(){return c}});var o=a(3366),n=(a(7294),a(4983)),i=a(3624),s=["components"],r={},l={_frontmatter:r},A=i.Z;function c(e){var t=e.components,a=(0,o.Z)(e,s);return(0,n.kt)(A,Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Sometime back in Maximo we had introduced the functionality of “Standard Services”. The name may sound confusing the but the intent was fairly simple. Maximo has a bunch of application services - aka App services which provide a bunch of service methods that act on Mbos to perform some business task. While most of these calls end up modifying the state of the system, some of these calls are merely for getting information. We have leveraged the JSR 181 annotations to expose these methods as “WebMethods” which can be accessed using SOAP and REST calls. For the purpose of this discussion, we are only going to focus on the RESTFul aspects of these methods."),(0,n.kt)("p",null,"Simply put, we can add a WebMethod to any existing Maximo App service by extending the service class and adding a method like below. This example is from say extending the Workorder Service ",(0,n.kt)("inlineCode",{parentName:"p"},"(psdi.app.workorder.WOService)"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'@WebMethod\npublic void approve(@WSMboKey(value="WORKORDER") MboRemote wo, String memo)\n{\n  wo.changeStatus("APPR",MXServer.getMXServer().getDate(),memo);\n}\n')),(0,n.kt)("p",null,"Next you want to make sure that your method is now available for REST api calls. To do that you can select any workorder record and use the rest api to get the set of allowed actions on that resource. For example the query below will do the job."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'GET /oslc/os/mxapiwo?oslc.where=wonum="1001"&oslc.select=allowedactions\n')),(0,n.kt)("p",null,"You will see the list of allowed actions, which are nothing but the list of WebMethods for the service corresponding to the root object of the Object Structure along with the list of actions registered with the Object structure (using the application menu “Action Definition”). The resulting json would provide the json schema for web method as well as the HTTP method and the name of the action, which can be used to invoke the action. A sample call below will demonstrate how these methods can be invoked."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"POST <uri of the workorder 1001>?action=wsmethod:approve \nx-method-override: PATCH\n")),(0,n.kt)("p",null,"Post body:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "memo":"Testing"\n}\n')),(0,n.kt)("p",null,"Note we need to set the request header x-method-override as PATCH for invoking this action api, as this is operating on an existing Mbo (the first parameter to the method). As expected, this mbo reference is derived from the request URI (say - uri of the workorder 1001) and passed into the method as part of the api invocation. The json schema for the payload will reflect the parameter data types (in the method) and the parameter names."),(0,n.kt)("p",null,"As you can figure out, the query parameter ",(0,n.kt)("inlineCode",{parentName:"p"},"action=wsmethod:approve")," is the fully qualified name of the action. The format is ",(0,n.kt)("inlineCode",{parentName:"p"},"<action type>:<name>")," where name is the java method name for the action type wsmethod."),(0,n.kt)("p",null,"You might already have guessed the limitation this has with overloaded methods. Currently overloaded methods are not supported for REST api calls."),(0,n.kt)("p",null,"There are quite a few of these methods that are available in the out of the box service. I would recommend using the “allowedactions” to check out these methods. We hope to be adding more and more of these methods every release as we evolve our application apis."),(0,n.kt)("p",null,"Besides the webmethod based actions, the REST apis support scripted actions too. Effectively you can write a REST action code using automation scripts. A simple example below will explain this concept."),(0,n.kt)("p",null,"First we need to create an automation script from the Autoscript application using the “Create Script For Integration” option. We need to select the Object Structure and then select the type of script as “Action Processing” and give a name for the action. Now you can write a script (in any language - python, js) using the implicit variable mbo. For example the script below changes the status of Asset to “OPERATING”,"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'mbo.changeStatus("OPERATING",False,False,False,False)\n')),(0,n.kt)("p",null,"Save the script."),(0,n.kt)("p",null,"Note that you did not write any code to commit the modification to the Asset mbo. The REST api framework commits the transaction after the method completes."),(0,n.kt)("p",null,"Next you need to register that script with the Object Structure. Goto the Object Structure application and select the “Action Definition” menu action and set the script as an action to the Object Structure as shown below. Name the action same as the name of the script. Choose OK to save the configuration."),(0,n.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"623px"}},"\n      ",(0,n.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"54.166666666666664%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd9kqQHD/8QAGhABAAEFAAAAAAAAAAAAAAAAAQACEBEhMf/aAAgBAQABBQINtAGIdW3/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAQZEg/9oACAEBAAY/AnR0dx//xAAcEAEAAgEFAAAAAAAAAAAAAAABABEQITFRYZH/2gAIAQEAAT8hNAurtLjftK8w2oyUuP/aAAwDAQACAAMAAAAQww//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAeEAABBAEFAAAAAAAAAAAAAAABABEhMdEQQXGR8P/aAAgBAQABPxBhz8LR4ICGk5kNruZUSCwyr440/9k=')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,n.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Action",title:"Action",src:"/maximo-autoscript-documentation/static/c889498580f02d5b33c7db8871573ecc/6d9cc/action1.jpg",srcSet:["/maximo-autoscript-documentation/static/c889498580f02d5b33c7db8871573ecc/69549/action1.jpg 288w","/maximo-autoscript-documentation/static/c889498580f02d5b33c7db8871573ecc/473e3/action1.jpg 576w","/maximo-autoscript-documentation/static/c889498580f02d5b33c7db8871573ecc/6d9cc/action1.jpg 623w"],sizes:"(max-width: 623px) 100vw, 623px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:""})),(0,n.kt)("p",null,"Next we can invoke this script with the request like below."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"POST <uri of the asset 1001>?action=TEST \nx-method-override: PATCH\n")),(0,n.kt)("p",null,"And you will see that the asset status changed to OPERATING. Note that if you wanted to get the changed Asset in response, you can always add the request header properties with your desired value. Note you can also"),(0,n.kt)("p",null,"You can also use this actions rest apis to invoke workflows. A sample below shows how workflow “ABC” for asset can be invoked."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"POST <uri of the asset 1001>?action=workflow:ABC \nx-method-override: PATCH\n")),(0,n.kt)("p",null,"For non-interactive workflows, this is all we need to do to initiate it. Interactive workflows are those that require user interaction by placement of assignments, input and interaction nodes. Interactive workflows will be covered in the “Interfacing with the Workflow Engine” section."))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-action-action-mdx-bc56f83b2ef45e08cf0e.js.map