{"componentChunkName":"component---src-pages-query-filtering-mdx","path":"/query/filtering/","result":{"pageContext":{"frontmatter":{"title":"Filtering"},"relativePagePath":"/query/filtering.mdx","titleType":"append","MdxNode":{"id":"37c97b69-8aed-5df8-9227-8aba1379b111","children":[],"parent":"0e7d3972-3f7c-5e3d-a543-837d57c70cff","internal":{"content":"---\ntitle: Filtering\n---\n\n## Where Filters - oslc.where\n\nThe most common way to filter a resource set is to use the  `oslc.where` query parameter. This parameter internally maps to the Maximo QBE framework. You can filter data that is based on all persistent attributes, at the main MBO (for the OS) or any related MBO. In the example, the `where clause` filters assets that are based on locations and the asset status.\n\n```\nGET /oslc/os/mxapiasset?oslc.where=status=\"OPERATING\" and location.status=\"OPERATING\"&lean=1\n```\n\nThe locations MBO is not part of the MXAPIASSET object structure. The format for the dot notation (`location.status`) is  `<rel1>[.rel2]*.attr1`. As you can make out, the dot notation can be nested. The leaf element is always an attribute in the target Mbo.\n\nThe following table describes the different operators that you can use for filtering data:\n\n|Operator|Description|Usage|\n|---|---|---|\n|=|equals|`status=\"APPR\"`|\n|>=|Greater than equals|`priority>=1`|\n|>|Greater than|`startdate>\"iso date\"`|\n|<|Less than|`startdate<\"iso date\"`|\n|<=|Less than equals|`linecost<=200.5`|\n|!=|Not equals|`priority!=2`|\n|in|In clause|`location in [\"A\",\"B\",\"C\"], priority in [1,2,3]`|\n \nThis query language is data type sensitive and the double quotes  `\"\"` is used for character based attributes and for dates (ISO Format). Numeric values are represented in their corresponding ISO formats (that is non localized format). Boolean values are always represented either as `1/0`  or `true/false` (no quotes).\n\n```\noslc.where=status in [\"OPERATING\",\"ACTIVE\"] and priority=3 and statusdate>\"ISO date string\" and linear=false\n```\n\nYou can use the in clause with numeric values too.\n\n```\noslc.where=priority in [1,2,3]\n```\n\nFor the LIKE clause, you can use the following variations:\n\n```\noslc.where=status=\"%APPR%\"\n```\n\nIf you want to use starts with:\n\n```\noslc.where=status=\"APPR%\"\n```\n\nIf you want to use ends with:\n\n```\noslc.where=status=\"%APPR\"\n```\n\nTo use null value queries,  you can use the star (*) notation. For example, a not null check is completed by using the following format where - `status is not null`.\n\n```\noslc.where=status=\"*\"\n```\n\nIf you want to use the is null check:\n\n```\noslc.where=status!=\"*\"\n```\n\nIf you want to use a not in clause, you can use the following format:\n\n```\nlocation!= \"[BR300,BR400]\"\n```\n\nNote that this not in clause currently only works for ALN attributes.\n \n## Range Filters\n\nRange filters are used to support range based queries. For example, if you want to only get assets within a certain date range and priority range, you can use this feature.\n\n```\noslc.where=priority>1 and priority<=3 and installdate>=\"1999-02-06T00:00:00-05:00\" and installdate<\"2009-02-06T00:00:00-05:00\"\n```\n\nYou can also filter with date ranges by using timeline queries.\n\n## SynonymDomain Internal Filters\n\nYou can also filter by using the internal values for synonymdomains. The following example shows how you can filter the work order objects that are based on the internal values for the status attribute (bound to the WOSTATUS synonymdomain).\n\n```\nGET <collection uri>?oslc.where=...&domaininternalwhere=status!=APPR,INPRG\n```\n\nThis will filter the work order collection using the __not in__ clause for the set of external values that correspond to the internal values of `APPR` and `INPRG`. We can use a `in` comparison by changing the expression like below:\n\n```\nGET <collection uri>?oslc.where=...&domaininternalwhere=status=APPR,INPRG\n```\n\nThere are a few things to note:\n\n* The `domaininternalwhere` query parameter is independent of the `oslc.where` and is `ANDed` to the `oslc.where ` clause (if `oslc.where` is present in the request).\n* The format is `<attr name>[=/!=]internal_val1,internal_val2,...`\n* This feature always generates an SQL with `in` or a `not in` operator depending on whether the  `=` or  `!=` operator was used.\n* The list of internal values need to be comma delimited.\n* There can be one or many internal values and null is not allowed in this value set.\n\n## MaxTableDomain Based Filters\n\nYou can also filter using the `maxtabledomain` list WHERE clause. The `maxtabledomain` is more useful for backward compatibility reasons with the older rest API and also in case a client wants to use an existing list WHERE clause that was created by using the table-domain. The API syntax is shown:\n\n```\nGET <collection uri>?_fd=<maxtabledomain name>&_fdsite=<siteid>&_fdorg=<orgid>\n```\n\nThis API picks up the domain's `listwhere` and applies that to the collection. The site and organization are optional and needed if the `maxtabledomain` is site/org scoped.\n\n## Timeline Filters\n\nThe timeline filters allow a simpler way to filter collections with time range based queries. The following example shows how you can list all work orders reported in the past three months:\n\n```\nGET /oslc/os/mxapiwodetail?tlrange=-3M&tlattribute=reportdate\n```\n\nThis query finds all the work orders with a reportdate between today and the previous three months. The query is by default indexed around the current date. Another variation of this query is to range on a future date by switching the sign on the `tlrange` to say `+3M` instead of `-3M`. For `reportdate` a future date range may not be good use case, but it would for date attributes like scheduled date that can be in the future. You might also use the current date as an index and filter around that date using the +- notation as shown in the following example:\n\n```\n&tlrange=+-3Y\n```\n\nThis query filters records from three years in the past and three years in the future that is indexed on the current date. If you do not want to index on the current date, you can specify the date that you want to use for the index. The following example shows how you can specify the date:\n\n```\n&tlattribute=reportdate=<some iso date>\n```\n\n## Classification Attribute Search\n\nMaximo objects, such as assets, locations, items, and work orders can be associated with classifications to provides a way to associate classification metadata (aka `classification attributes`) to the objects. These objects (assets,locations etc) are searched for based on those attribute values. This search capability is known as the attribute search feature. The following example shows an attributesearch that is applied to the asset MBO by using the MXAPIASSET object structure.\n\n```\nGET oslc/os/mxapiasset?attributesearch=[SPEED:>=50]\n```\n\nAll assets that have a class spec attribute called `SPEED` with a value `>=50` are searched for. If the value `:>=50` is not defined, then assets that have `SPEED` as a specific attribute is returned.\n\n``` \nGET oslc/os/mxapiasset?attributesearch=[SPEED]\n```\n\nIt would have only fetched assets that have SPEED as a spec attribute. To combine multiple attributes in the search, you can use the following example:\n\n```\nGET oslc/os/mxapiasset?attributesearch=[SPEED:>=50;AREA;ELEV:=300]\n```\n\nThis query searches for assets that have a class spec attribute `SPEED` with a value that is greater than 50, an attribute named AREA, and attribute name ELEV with a value of 300, all ANDed together.\n\nThis feature is in addition to the `oslc.where/savedquery` query parameter. So you can use this feature along with the other filtering capabilities that are supported in this API framework.","type":"Mdx","contentDigest":"71b4c9acafa772501add4c3442c0861c","owner":"gatsby-plugin-mdx","counter":173},"frontmatter":{"title":"Filtering"},"exports":{},"rawBody":"---\ntitle: Filtering\n---\n\n## Where Filters - oslc.where\n\nThe most common way to filter a resource set is to use the  `oslc.where` query parameter. This parameter internally maps to the Maximo QBE framework. You can filter data that is based on all persistent attributes, at the main MBO (for the OS) or any related MBO. In the example, the `where clause` filters assets that are based on locations and the asset status.\n\n```\nGET /oslc/os/mxapiasset?oslc.where=status=\"OPERATING\" and location.status=\"OPERATING\"&lean=1\n```\n\nThe locations MBO is not part of the MXAPIASSET object structure. The format for the dot notation (`location.status`) is  `<rel1>[.rel2]*.attr1`. As you can make out, the dot notation can be nested. The leaf element is always an attribute in the target Mbo.\n\nThe following table describes the different operators that you can use for filtering data:\n\n|Operator|Description|Usage|\n|---|---|---|\n|=|equals|`status=\"APPR\"`|\n|>=|Greater than equals|`priority>=1`|\n|>|Greater than|`startdate>\"iso date\"`|\n|<|Less than|`startdate<\"iso date\"`|\n|<=|Less than equals|`linecost<=200.5`|\n|!=|Not equals|`priority!=2`|\n|in|In clause|`location in [\"A\",\"B\",\"C\"], priority in [1,2,3]`|\n \nThis query language is data type sensitive and the double quotes  `\"\"` is used for character based attributes and for dates (ISO Format). Numeric values are represented in their corresponding ISO formats (that is non localized format). Boolean values are always represented either as `1/0`  or `true/false` (no quotes).\n\n```\noslc.where=status in [\"OPERATING\",\"ACTIVE\"] and priority=3 and statusdate>\"ISO date string\" and linear=false\n```\n\nYou can use the in clause with numeric values too.\n\n```\noslc.where=priority in [1,2,3]\n```\n\nFor the LIKE clause, you can use the following variations:\n\n```\noslc.where=status=\"%APPR%\"\n```\n\nIf you want to use starts with:\n\n```\noslc.where=status=\"APPR%\"\n```\n\nIf you want to use ends with:\n\n```\noslc.where=status=\"%APPR\"\n```\n\nTo use null value queries,  you can use the star (*) notation. For example, a not null check is completed by using the following format where - `status is not null`.\n\n```\noslc.where=status=\"*\"\n```\n\nIf you want to use the is null check:\n\n```\noslc.where=status!=\"*\"\n```\n\nIf you want to use a not in clause, you can use the following format:\n\n```\nlocation!= \"[BR300,BR400]\"\n```\n\nNote that this not in clause currently only works for ALN attributes.\n \n## Range Filters\n\nRange filters are used to support range based queries. For example, if you want to only get assets within a certain date range and priority range, you can use this feature.\n\n```\noslc.where=priority>1 and priority<=3 and installdate>=\"1999-02-06T00:00:00-05:00\" and installdate<\"2009-02-06T00:00:00-05:00\"\n```\n\nYou can also filter with date ranges by using timeline queries.\n\n## SynonymDomain Internal Filters\n\nYou can also filter by using the internal values for synonymdomains. The following example shows how you can filter the work order objects that are based on the internal values for the status attribute (bound to the WOSTATUS synonymdomain).\n\n```\nGET <collection uri>?oslc.where=...&domaininternalwhere=status!=APPR,INPRG\n```\n\nThis will filter the work order collection using the __not in__ clause for the set of external values that correspond to the internal values of `APPR` and `INPRG`. We can use a `in` comparison by changing the expression like below:\n\n```\nGET <collection uri>?oslc.where=...&domaininternalwhere=status=APPR,INPRG\n```\n\nThere are a few things to note:\n\n* The `domaininternalwhere` query parameter is independent of the `oslc.where` and is `ANDed` to the `oslc.where ` clause (if `oslc.where` is present in the request).\n* The format is `<attr name>[=/!=]internal_val1,internal_val2,...`\n* This feature always generates an SQL with `in` or a `not in` operator depending on whether the  `=` or  `!=` operator was used.\n* The list of internal values need to be comma delimited.\n* There can be one or many internal values and null is not allowed in this value set.\n\n## MaxTableDomain Based Filters\n\nYou can also filter using the `maxtabledomain` list WHERE clause. The `maxtabledomain` is more useful for backward compatibility reasons with the older rest API and also in case a client wants to use an existing list WHERE clause that was created by using the table-domain. The API syntax is shown:\n\n```\nGET <collection uri>?_fd=<maxtabledomain name>&_fdsite=<siteid>&_fdorg=<orgid>\n```\n\nThis API picks up the domain's `listwhere` and applies that to the collection. The site and organization are optional and needed if the `maxtabledomain` is site/org scoped.\n\n## Timeline Filters\n\nThe timeline filters allow a simpler way to filter collections with time range based queries. The following example shows how you can list all work orders reported in the past three months:\n\n```\nGET /oslc/os/mxapiwodetail?tlrange=-3M&tlattribute=reportdate\n```\n\nThis query finds all the work orders with a reportdate between today and the previous three months. The query is by default indexed around the current date. Another variation of this query is to range on a future date by switching the sign on the `tlrange` to say `+3M` instead of `-3M`. For `reportdate` a future date range may not be good use case, but it would for date attributes like scheduled date that can be in the future. You might also use the current date as an index and filter around that date using the +- notation as shown in the following example:\n\n```\n&tlrange=+-3Y\n```\n\nThis query filters records from three years in the past and three years in the future that is indexed on the current date. If you do not want to index on the current date, you can specify the date that you want to use for the index. The following example shows how you can specify the date:\n\n```\n&tlattribute=reportdate=<some iso date>\n```\n\n## Classification Attribute Search\n\nMaximo objects, such as assets, locations, items, and work orders can be associated with classifications to provides a way to associate classification metadata (aka `classification attributes`) to the objects. These objects (assets,locations etc) are searched for based on those attribute values. This search capability is known as the attribute search feature. The following example shows an attributesearch that is applied to the asset MBO by using the MXAPIASSET object structure.\n\n```\nGET oslc/os/mxapiasset?attributesearch=[SPEED:>=50]\n```\n\nAll assets that have a class spec attribute called `SPEED` with a value `>=50` are searched for. If the value `:>=50` is not defined, then assets that have `SPEED` as a specific attribute is returned.\n\n``` \nGET oslc/os/mxapiasset?attributesearch=[SPEED]\n```\n\nIt would have only fetched assets that have SPEED as a spec attribute. To combine multiple attributes in the search, you can use the following example:\n\n```\nGET oslc/os/mxapiasset?attributesearch=[SPEED:>=50;AREA;ELEV:=300]\n```\n\nThis query searches for assets that have a class spec attribute `SPEED` with a value that is greater than 50, an attribute named AREA, and attribute name ELEV with a value of 300, all ANDed together.\n\nThis feature is in addition to the `oslc.where/savedquery` query parameter. So you can use this feature along with the other filtering capabilities that are supported in this API framework.","fileAbsolutePath":"/home/travis/build/maximo-app-framework/maximo-restapi-documentation/src/pages/query/filtering.mdx"}}},"staticQueryHashes":["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}