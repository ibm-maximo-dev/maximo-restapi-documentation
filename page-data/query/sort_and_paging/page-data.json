{"componentChunkName":"component---src-pages-query-sort-and-paging-mdx","path":"/query/sort_and_paging/","result":{"pageContext":{"frontmatter":{"title":"Sorting and paging"},"relativePagePath":"/query/sort_and_paging.mdx","titleType":"append","MdxNode":{"id":"cfe288f7-7ec6-5345-8455-5ccfb6e0fe6b","children":[],"parent":"c638a415-9b0e-56ae-b283-79549cadc3f7","internal":{"content":"---\ntitle: Sorting and paging\n---\n\n## Sorting - oslc.orderBy\n\nSorting of collection resource can be done using the oslc.orderBy query parameter. The format for this is\n\n```\nGET oslc/os/mxapiasset?oslc.orderBy=-attr1,+attr2&lean=1\n```\n\nThe attributes prefixed with the minus sign (-) will be sorted in the descending order and the ones with the plus (+) sign will be sorted in the ascending order. All attributes listed here should be prefixed with a + or - sign. There is not default sort order here. Also related attributes are not supported here. Only persistent attributes from the main object are supported here.\n\nNote that the + sign needs to get encoded - a common mistake made by developers when trying this one out.\n\n## Paging\n\nPaging of data is a basic requirement and we have a query parameter oslc.pageSize to do just that. That parameter value is used to specify the max records to fetch for a page. A sample uri shown earlier describes how to achieve paging.\n\n```\nGET oslc/os/mxapiasset?oslc.pageSize=10&lean=1\n```\n\nAs discussed before, this causes the responseInfo object to have the nextPage,previousPage,pagenum,totalCount (optional) and totalPages (optional) properties to describe page navigation information.\n \n### Auto-paging\n\nWe have had long faced this question about how to auto-initiate paging and in the current release candidate (7.6.0.8) we have finally added that feature. This feature is primarily needed if we are accidentally requesting a large data set which can cause resource starvation or OOM errors in Maximo server. To prevent that, we have an attribute in the Object structure application to set the auto-paging threshold. For example if we set that to 1000 for MXAPIASSET Object Structure, and the request is as below\n\n```\nGET /oslc/os/mxapiasset?lean=1\n```\n\nAlthough the oslc.pageSize is not set, the system will start paging the request if the asset count starts exceeding the 1000 limit.\n\n### Limit Paging\n\nIt is also possible that while querying a client set the page size to be too high, which in turn could also cause an OOM error. To handle that scenario we have a property `mxe.oslc.maxpagesize` which can be set to a positive value for the page size. This will apply to all maximo object structures. We can also set the property specific to an Object Structure by setting the property `mxe.oslc.<os name in lower case>.maxpagesize`. This will override the global value set by property mxe.oslc.maxpagesize. If the request page size exceeds this value, the system will throw an error and the request will fail.\n\n\n### Stable Paging\n\nStable paging is a variation of the basic paging. In stable paging we load the MboSet in memory (note the MboSet contains 0 Mbos at this point as the Mbo's are loaded on demand), and retain a reference to it throughout the paging process. As we page through the MboSet, the Mbo's are discarded. Effectively at any given point in the paging, only 1 mbo is live. Note, the basic paging will also discard the Mbo's as we serialize them and there would never be more than 1 mbo in memory for the life of the paging. However in basic paging the MboSet gets loaded for every page request ie the sql query gets fired every time. That's where stable paging scores big as it holds the MboSet reference and does not need to fire the sql for every page. The downside being, the pages expire as they get delivered (as the mbos get discarded and the MboSet is never refreshed). Sample api to initiate stable paging:\n\n```\nGET /oslc/os/mxapiasset?oslc.pageSize=10&stablepaging=1\n```\n\nThis creates a stable id which will be embedded as part of the nextPage uri `(stableId=<some id>)`. We need to use that uri to page forward. We cannot reload the same page as the page expires at first load. There is no paging backward as pages including the current page have expired.\n\nThe stored MboSet will expire if it has not been accessed for 5 minutes or it has be paged to the end of the set. This idle expiry time (of 5 minutes) can be changed using the mxe.oslc.idleexiry value (which is in seconds).\n\nYou can see a live demo of the stable paging here [Stable Paging and Search Terms](tobefixed)","type":"Mdx","contentDigest":"154d377b1152f7e996eff1955dbb1245","owner":"gatsby-plugin-mdx","counter":152},"frontmatter":{"title":"Sorting and paging"},"exports":{},"rawBody":"---\ntitle: Sorting and paging\n---\n\n## Sorting - oslc.orderBy\n\nSorting of collection resource can be done using the oslc.orderBy query parameter. The format for this is\n\n```\nGET oslc/os/mxapiasset?oslc.orderBy=-attr1,+attr2&lean=1\n```\n\nThe attributes prefixed with the minus sign (-) will be sorted in the descending order and the ones with the plus (+) sign will be sorted in the ascending order. All attributes listed here should be prefixed with a + or - sign. There is not default sort order here. Also related attributes are not supported here. Only persistent attributes from the main object are supported here.\n\nNote that the + sign needs to get encoded - a common mistake made by developers when trying this one out.\n\n## Paging\n\nPaging of data is a basic requirement and we have a query parameter oslc.pageSize to do just that. That parameter value is used to specify the max records to fetch for a page. A sample uri shown earlier describes how to achieve paging.\n\n```\nGET oslc/os/mxapiasset?oslc.pageSize=10&lean=1\n```\n\nAs discussed before, this causes the responseInfo object to have the nextPage,previousPage,pagenum,totalCount (optional) and totalPages (optional) properties to describe page navigation information.\n \n### Auto-paging\n\nWe have had long faced this question about how to auto-initiate paging and in the current release candidate (7.6.0.8) we have finally added that feature. This feature is primarily needed if we are accidentally requesting a large data set which can cause resource starvation or OOM errors in Maximo server. To prevent that, we have an attribute in the Object structure application to set the auto-paging threshold. For example if we set that to 1000 for MXAPIASSET Object Structure, and the request is as below\n\n```\nGET /oslc/os/mxapiasset?lean=1\n```\n\nAlthough the oslc.pageSize is not set, the system will start paging the request if the asset count starts exceeding the 1000 limit.\n\n### Limit Paging\n\nIt is also possible that while querying a client set the page size to be too high, which in turn could also cause an OOM error. To handle that scenario we have a property `mxe.oslc.maxpagesize` which can be set to a positive value for the page size. This will apply to all maximo object structures. We can also set the property specific to an Object Structure by setting the property `mxe.oslc.<os name in lower case>.maxpagesize`. This will override the global value set by property mxe.oslc.maxpagesize. If the request page size exceeds this value, the system will throw an error and the request will fail.\n\n\n### Stable Paging\n\nStable paging is a variation of the basic paging. In stable paging we load the MboSet in memory (note the MboSet contains 0 Mbos at this point as the Mbo's are loaded on demand), and retain a reference to it throughout the paging process. As we page through the MboSet, the Mbo's are discarded. Effectively at any given point in the paging, only 1 mbo is live. Note, the basic paging will also discard the Mbo's as we serialize them and there would never be more than 1 mbo in memory for the life of the paging. However in basic paging the MboSet gets loaded for every page request ie the sql query gets fired every time. That's where stable paging scores big as it holds the MboSet reference and does not need to fire the sql for every page. The downside being, the pages expire as they get delivered (as the mbos get discarded and the MboSet is never refreshed). Sample api to initiate stable paging:\n\n```\nGET /oslc/os/mxapiasset?oslc.pageSize=10&stablepaging=1\n```\n\nThis creates a stable id which will be embedded as part of the nextPage uri `(stableId=<some id>)`. We need to use that uri to page forward. We cannot reload the same page as the page expires at first load. There is no paging backward as pages including the current page have expired.\n\nThe stored MboSet will expire if it has not been accessed for 5 minutes or it has be paged to the end of the set. This idle expiry time (of 5 minutes) can be changed using the mxe.oslc.idleexiry value (which is in seconds).\n\nYou can see a live demo of the stable paging here [Stable Paging and Search Terms](tobefixed)","fileAbsolutePath":"/home/travis/build/maximo-app-framework/maximo-restapi-documentation/src/pages/query/sort_and_paging.mdx"}}},"staticQueryHashes":["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}