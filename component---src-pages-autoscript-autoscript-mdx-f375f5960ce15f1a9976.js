"use strict";(self.webpackChunkmas_playbook=self.webpackChunkmas_playbook||[]).push([[7593],{3624:function(e,t,a){a.d(t,{Z:function(){return E}});var r=a(7294),n=a(8650),s=a.n(n),o=a(1597),i=a(811),l=a(87),c=a(5900),u=a.n(c),m=function(e){var t,a=e.title,n=e.theme,s=e.tabs,o=void 0===s?[]:s;return r.createElement("div",{className:u()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=o.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===n,t))},r.createElement("div",{className:"bx--grid"},r.createElement("div",{className:"bx--row"},r.createElement("div",{className:"bx--col-lg-12"},r.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},a)))))},p=function(e){var t=e.relativePagePath,a=e.repository,n=(0,o.useStaticQuery)("1364590287").site.siteMetadata.repository,s=a||n,i=s.baseUrl,l=s.subDirectory,c=i+"/edit/"+s.branch+l+"/src/pages"+t;return i?r.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},r.createElement("div",{className:"bx--col"},r.createElement("a",{className:"EditLink-module--link--IDrl1",href:c},"Edit this page on GitHub"))):null},d=a(4703),g=a(1721),h=function(e){function t(){return e.apply(this,arguments)||this}return(0,g.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,n=e.slug,i=n.split("/").filter(Boolean).slice(-1)[0],l=a.map((function(e){var t,a=s()(e,{lower:!0,strict:!0}),l=a===i,c=new RegExp(i+"/?(#.*)?$"),m=n.replace(c,a);return r.createElement("li",{key:e,className:u()((t={},t["PageTabs-module--selected-item--aBB0K"]=l,t),"PageTabs-module--list-item--024o6")},r.createElement(o.Link,{className:"PageTabs-module--link--Kz-7R",to:""+m},e))}));return r.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},r.createElement("div",{className:"bx--grid"},r.createElement("div",{className:"bx--row"},r.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},r.createElement("nav",{"aria-label":t},r.createElement("ul",{className:"PageTabs-module--list--xLqxG"},l))))))},t}(r.Component),w=h,b=a(7296),f=a(5387),v=a(3732),k=function(e){var t=e.date,a=new Date(t);return t?r.createElement(v.X2,{className:"last-modified-date-module--row--XJoYQ"},r.createElement(v.sg,null,r.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},E=function(e){var t=e.pageContext,a=e.children,n=e.location,c=e.Title,u=t.frontmatter,g=void 0===u?{}:u,h=t.relativePagePath,v=t.titleType,E=g.tabs,y=g.title,N=g.theme,P=g.description,x=g.keywords,T=g.date,S=(0,f.Z)().interiorTheme,C=(0,o.useStaticQuery)("2456312558").site.pathPrefix,M=C?n.pathname.replace(C,""):n.pathname,X=E?M.split("/").filter(Boolean).slice(-1)[0]||s()(E[0],{lower:!0}):"",Z=N||S;return r.createElement(l.Z,{tabs:E,homepage:!1,theme:Z,pageTitle:y,pageDescription:P,pageKeywords:x,titleType:v},r.createElement(m,{title:c?r.createElement(c,null):y,label:"label",tabs:E,theme:Z}),E&&r.createElement(w,{title:y,slug:M,tabs:E,currentTab:X}),r.createElement(b.Z,{padded:!0},a,r.createElement(p,{relativePagePath:h}),r.createElement(k,{date:T})),r.createElement(d.Z,{pageContext:t,location:n,slug:M,tabs:E,currentTab:X}),r.createElement(i.Z,null))}},3626:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return i},default:function(){return u}});var r=a(3366),n=(a(7294),a(4983)),s=a(3624),o=["components"],i={},l={_frontmatter:i},c=s.Z;function u(e){var t=e.components,a=(0,r.Z)(e,o);return(0,n.kt)(c,Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"The rest api’s have a tight integration with the automation scripts. Automation scripts can be leveraged to develop custom apis. A sample call shown below describes how automation scripts interact with rest apis."),(0,n.kt)("p",null,"Say we want to find the total number of in progress work and service requests in a given site. Since there is no out of the box api for that, you will end up writing one for yourself. At this point in Maximo, let’s say that we prefer to write any custom feature using automation scripting. Since this is rest apis with json response, we would prefer to use the JavaScript language for scripting. Say we want to call this api countofwoandsr. The api should look like this"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"GET /oslc/script/countofwoandsr?site=ABC\n")),(0,n.kt)("p",null,"We would like to get a response in json as below"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "wocount": 100,\n  "srcount": 20,\n  "total": 120\n}\n')),(0,n.kt)("p",null,"Now let us write the script to get this api going. "),(0,n.kt)("p",null,"Script Name: countofwoandsr "),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'importPackage(Packages.psdi.server);\n\nvar resp = {};\nvar site = request.getQueryParam("site"); var woset = MXServer.getMXServer().getMboSet("workorder",request.getUserInfo()); woset.setQbe("siteid","="+site);\nvar woCount = woset.count(); resp.wocount = woCount;\n\nvar srset = MXServer.getMXServer().getMboSet("sr",request.getUserInfo()); srset.setQbe("siteid","="+site);\nvar srCount = srset.count(); resp.srcount = srCount; resp.total = srCount+woCount;\n \nvar responseBody = JSON.stringify(resp);\n')),(0,n.kt)("p",null,"That is pretty much what we should need to get this api going. All we need to do now is to save the script and open up our browser and fire off the GET request and see if the results come up as expected."),(0,n.kt)("p",null,"We talked about the GET support with automation scripts. We can now talk about how to leverage POST apis with scripting."),(0,n.kt)("p",null,"Automation scripts are also used for implementing custom queries and custom actions. We will discuss those in their respective sections."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-autoscript-autoscript-mdx-f375f5960ce15f1a9976.js.map